"""
Data Seeder Service for Big Kahuna Burger HR Platform

Creates mock benign data for testing when database is empty.
This data is clean and safe - vulnerabilities are demonstrated through the platform itself.
"""

from sqlalchemy.orm import Session
from ..models.models import User, Job, JobApplication, ChatSession, SystemPrompt
from ..services.auth import get_password_hash
from ..database import SessionLocal, engine

def check_database_empty(db: Session) -> bool:
    """Check if database is empty (no users exist)"""
    user_count = db.query(User).count()
    return user_count == 0

def create_sample_users(db: Session):
    """Create sample users with various roles"""
    users_data = [
        {
            "username": "hr_admin",
            "email": "hr@bigkahuna.ru",
            "password": "pass1234",
            "full_name": "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞",
            "is_hr": True,
            "personal_notes": "–ì–ª–∞–≤–Ω—ã–π HR-–º–µ–Ω–µ–¥–∂–µ—Ä Big Kahuna Burger –≤ –†–æ—Å—Å–∏–∏"
        },
        {
            "username": "candidate1",
            "email": "ivan@example.ru",
            "password": "pass1234",
            "full_name": "–ò–≤–∞–Ω –°–º–∏—Ä–Ω–æ–≤",
            "is_hr": False,
            "personal_notes": "–û–ø—ã—Ç–Ω—ã–π –ø–æ–≤–∞—Ä, –∏—â–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞"
        },
        {
            "username": "candidate2",
            "email": "elena@example.ru",
            "password": "pass1234",
            "full_name": "–ï–ª–µ–Ω–∞ –í–∞—Å–∏–ª—å–µ–≤–∞",
            "is_hr": False,
            "personal_notes": "–ù–∞–¥–µ–∂–Ω—ã–π –∫—É—Ä—å–µ—Ä —Å –±–µ–∑—É–ø—Ä–µ—á–Ω–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π"
        },
        {
            "username": "manager1",
            "email": "mikhail@bigkahuna.ru",
            "password": "pass1234",
            "full_name": "–ú–∏—Ö–∞–∏–ª –ö–æ–∑–ª–æ–≤",
            "is_hr": True,
            "personal_notes": "–ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞–π–º–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"
        },
        {
            "username": "testuser",
            "email": "test@test.ru",
            "password": "pass1234",
            "full_name": "–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
            "is_hr": False,
            "personal_notes": "–¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"
        }
    ]
    
    for user_data in users_data:
        user = User(
            username=user_data["username"],
            email=user_data["email"],
            hashed_password=get_password_hash(user_data["password"]),
            full_name=user_data["full_name"],
            is_hr=user_data["is_hr"],
            personal_notes=user_data["personal_notes"]
        )
        db.add(user)
    
    db.commit()
    print("‚úÖ –û–±—Ä–∞–∑—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞–Ω—ã")

def create_sample_jobs(db: Session):
    """Create sample job postings"""
    jobs_data = [
        {
            "title": "–ü–æ–≤–∞—Ä-–±—É—Ä–≥–µ—Ä–∏—Å—Ç",
            "description": "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–π –∫—É—Ö–æ–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ Big Kahuna Burger! –ú—ã –∏—â–µ–º —É–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –ø–æ–≤–∞—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ª—é–±—è—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–µ –±—É—Ä–≥–µ—Ä—ã.",
            "requirements": "–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –ø–æ–≤–∞—Ä–æ–º, –∑–Ω–∞–Ω–∏–µ —Å–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –Ω–æ—Ä–º, –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ",
            "location": "–ú–æ—Å–∫–≤–∞",
            "salary_range": "80,000-120,000 ‚ÇΩ/–º–µ—Å—è—Ü",
            "additional_info": "–û—Ç–ª–∏—á–Ω—ã–µ –ª—å–≥–æ—Ç—ã! –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞, –≥–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ!",
            "created_by": 1
        },
        {
            "title": "–ö—É—Ä—å–µ—Ä-–¥–æ—Å—Ç–∞–≤—â–∏–∫",
            "description": "–î–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –≤–∫—É—Å–Ω—ã–µ –±—É—Ä–≥–µ—Ä—ã Big Kahuna –Ω–∞—à–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º. –ù–µ–æ–±—Ö–æ–¥–∏–º –Ω–∞–¥–µ–∂–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç.",
            "requirements": "–í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ B, —á–∏—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤–æ–∂–¥–µ–Ω–∏—è, –Ω–∞–≤—ã–∫–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤",
            "location": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
            "salary_range": "60,000 ‚ÇΩ/–º–µ—Å—è—Ü + —á–∞–µ–≤—ã–µ",
            "additional_info": "–ì–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã. –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.",
            "created_by": 1
        },
        {
            "title": "–£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–º",
            "description": "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–π—Ç–µ –æ—Ç–ª–∏—á–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ Big Kahuna Burger.",
            "requirements": "–û–ø—ã—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞, –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ –æ–±—â–µ–ø–∏—Ç–µ",
            "location": "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥",
            "salary_range": "150,000-200,000 ‚ÇΩ/–º–µ—Å—è—Ü",
            "additional_info": "–û—Ç–ª–∏—á–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞! –ü–æ–ª–Ω—ã–π —Å–æ—Ü–ø–∞–∫–µ—Ç.",
            "created_by": 4
        },
        {
            "title": "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏",
            "description": "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∂–∞–ª–æ–±—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —É–ª—ã–±–∫–æ–π! –°—Ç–∞–Ω—å—Ç–µ –ª–∏—Ü–æ–º Big Kahuna Burger.",
            "requirements": "–û—Ç–ª–∏—á–Ω—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏, —É–º–µ–Ω–∏–µ —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, —Ç–µ—Ä–ø–µ–Ω–∏–µ",
            "location": "–£–¥–∞–ª–µ–Ω–Ω–æ",
            "salary_range": "70,000-90,000 ‚ÇΩ/–º–µ—Å—è—Ü",
            "additional_info": "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∏–∑ –¥–æ–º–∞!",
            "created_by": 1
        },
        {
            "title": "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É",
            "description": "–ü–æ–º–æ–≥–∏—Ç–µ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å Big Kahuna Burger —á–µ—Ä–µ–∑ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏.",
            "requirements": "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–±–ª–∞—Å—Ç–∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ",
            "location": "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫",
            "salary_range": "100,000-140,000 ‚ÇΩ/–º–µ—Å—è—Ü",
            "additional_info": "–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Ä–æ–ª—å —Å –±–æ–ª—å—à–æ–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é!",
            "created_by": 4
        }
    ]
    
    for job_data in jobs_data:
        job = Job(
            title=job_data["title"],
            description=job_data["description"],
            requirements=job_data["requirements"],
            location=job_data["location"],
            salary_range=job_data["salary_range"],
            additional_info=job_data["additional_info"],
            created_by=job_data["created_by"],
            is_active=True
        )
        db.add(job)
    
    db.commit()
    print("‚úÖ –û–±—Ä–∞–∑—Ü—ã –≤–∞–∫–∞–Ω—Å–∏–π —Å–æ–∑–¥–∞–Ω—ã")

def create_sample_applications(db: Session):
    """Create sample job applications"""
    applications_data = [
        {
            "user_id": 2,  # candidate1
            "job_id": 1,   # –ü–æ–≤–∞—Ä-–±—É—Ä–≥–µ—Ä–∏—Å—Ç
            "cover_letter": "–ú–µ–Ω—è –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø–æ–∑–∏—Ü–∏—è –ø–æ–≤–∞—Ä–∞-–±—É—Ä–≥–µ—Ä–∏—Å—Ç–∞. –£ –º–µ–Ω—è 3 –≥–æ–¥–∞ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã –≤ —Ñ–∞—Å—Ç—Ñ—É–¥–µ –∏ —è –æ–±–æ–∂–∞—é –≥–æ—Ç–æ–≤–∏—Ç—å!",
            "cv_score": 7,
            "additional_answers": {"experience": "3 –≥–æ–¥–∞ –≤ —Ñ–∞—Å—Ç—Ñ—É–¥–µ", "availability": "–ü–æ–ª–Ω–∞—è –∑–∞–Ω—è—Ç–æ—Å—Ç—å"}
        },
        {
            "user_id": 3,  # candidate2
            "job_id": 2,   # –ö—É—Ä—å–µ—Ä-–¥–æ—Å—Ç–∞–≤—â–∏–∫
            "cover_letter": "–Ø –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –≤–æ–∂—É —É–∂–µ 5 –ª–µ—Ç –±–µ–∑ –µ–¥–∏–Ω–æ–π –∞–≤–∞—Ä–∏–∏. –û—Ç–ª–∏—á–Ω–æ –∑–Ω–∞—é –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –ø—Ä–∏–≥–æ—Ä–æ–¥—ã.",
            "cv_score": 8,
            "additional_answers": {"license_type": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è B", "vehicle": "Lada Vesta 2020"}
        },
        {
            "user_id": 5,  # testuser
            "job_id": 4,   # –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
            "cover_letter": "–Ø –±—ã —Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º —Ä–∞–±–æ—Ç–∞–ª –≤ —Å–ª—É–∂–±–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤! –£ –º–µ–Ω—è –æ—Ç–ª–∏—á–Ω—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –∏ –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.",
            "cv_score": 5,
            "additional_answers": {"experience": "2 –≥–æ–¥–∞ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ", "availability": "–ù–µ–ø–æ–ª–Ω–∞—è –∑–∞–Ω—è—Ç–æ—Å—Ç—å"}
        }
    ]
    
    for app_data in applications_data:
        application = JobApplication(
            user_id=app_data["user_id"],
            job_id=app_data["job_id"],
            cover_letter=app_data["cover_letter"],
            cv_score=app_data["cv_score"],
            additional_answers=app_data["additional_answers"],
            cv_filename=f"cv_user_{app_data['user_id']}.pdf",
            status="pending"
        )
        db.add(application)
    
    db.commit()
    print("‚úÖ –û–±—Ä–∞–∑—Ü—ã –∑–∞—è–≤–æ–∫ —Å–æ–∑–¥–∞–Ω—ã")

def create_sample_chat_sessions(db: Session):
    """Create sample chat sessions with realistic conversations"""
    chat_data = [
        {
            "user_id": 2,
            "job_id": 1,
            "user_message": "–ö–∞–∫–∏–µ –ª—å–≥–æ—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Big Kahuna Burger —Å–≤–æ–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º?",
            "ai_response": "–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –í Big Kahuna Burger –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é –∑–∞—Ä–ø–ª–∞—Ç—É, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ, –≥–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Å–º–µ–Ω. –¢–∞–∫–∂–µ –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –≤ –Ω–∞—à–µ–π —Ä–∞—Å—Ç—É—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏."
        },
        {
            "user_id": 3,
            "job_id": 2,
            "user_message": "–ö–∞–∫–æ–π –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã —É –∫—É—Ä—å–µ—Ä–æ–≤-–¥–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤?",
            "ai_response": "–ù–∞—à–∏ –∫—É—Ä—å–µ—Ä—ã-–¥–æ—Å—Ç–∞–≤—â–∏–∫–∏ –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –≥–∏–±–∫–∏–µ —Å–º–µ–Ω—ã —Å 11:00 –¥–æ 23:00. –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –∫–∞–∫ —á–∞—Å—Ç–∏—á–Ω—É—é, —Ç–∞–∫ –∏ –ø–æ–ª–Ω—É—é –∑–∞–Ω—è—Ç–æ—Å—Ç—å, –∏ –≤—ã —á–∞—Å—Ç–æ –º–æ–∂–µ—Ç–µ –≤—ã–±–∏—Ä–∞—Ç—å —É–¥–æ–±–Ω—ã–µ –¥–ª—è –≤–∞—Å —á–∞—Å—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è."
        },
        {
            "user_id": 5,
            "job_id": None,
            "user_message": "–ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Big Kahuna Burger?",
            "ai_response": "Big Kahuna Burger –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞! –ú–Ω–æ–≥–∏–µ –Ω–∞—à–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –Ω–∞—á–∏–Ω–∞–ª–∏ –∫–∞–∫ —Ä—è–¥–æ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –¥–æ—Å–ª—É–∂–∏–ª–∏—Å—å –¥–æ —Ä—É–∫–æ–≤–æ–¥—è—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π. –ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è, —Ä–∞–∑–≤–∏—Ç–∏–µ –ª–∏–¥–µ—Ä—Å–∫–∏—Ö –∫–∞—á–µ—Å—Ç–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä—Å–∫–∏–µ —Ä–æ–ª–∏, –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –≤ –∏—Ç–æ–≥–µ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞."
        },
        {
            "user_id": 5,
            "job_id": 4,
            "user_message": "–ö–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏?",
            "ai_response": "–î–ª—è –ø–æ–∑–∏—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã –æ—Ç–ª–∏—á–Ω—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏, –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–ª—É—à–∞–Ω–∏–µ, —É–º–µ–Ω–∏–µ —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, —Ç–µ—Ä–ø–µ–Ω–∏–µ –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ. –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª–µ–∑–µ–Ω, –Ω–æ –º—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ. –ú—ã —Ü–µ–Ω–∏–º —ç–º–ø–∞—Ç–∏—é –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –≤ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç."
        }
    ]
    
    for chat in chat_data:
        session = ChatSession(
            user_id=chat["user_id"],
            job_id=chat["job_id"],
            user_message=chat["user_message"],
            ai_response=chat["ai_response"]
        )
        db.add(session)
    
    db.commit()
    print("‚úÖ –û–±—Ä–∞–∑—Ü—ã —á–∞—Ç-—Å–µ—Å—Å–∏–π —Å–æ–∑–¥–∞–Ω—ã")

def create_system_prompts(db: Session):
    """Create system prompts for AI interactions"""
    prompts_data = [
        {
            "name": "default_chat",
            "content": "–í—ã HR-–ø–æ–º–æ—â–Ω–∏–∫ —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º Big Kahuna Burger. –ü–æ–º–æ–≥–∞–π—Ç–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º —É–∑–Ω–∞–≤–∞—Ç—å –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –∫—É–ª—å—Ç—É—Ä–µ. –ë—É–¥—å—Ç–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã.",
            "is_active": True
        },
        {
            "name": "cv_analysis",
            "content": "–í—ã –ò–ò, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—é–º–µ –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –≤–∞–∫–∞–Ω—Å–∏–µ–π. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 0 –¥–æ 10. –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –æ—Ç–≤–µ—Ç —Å '–û—Ü–µ–Ω–∫–∞: X/10'.",
            "is_active": True
        }
    ]
    
    for prompt_data in prompts_data:
        prompt = SystemPrompt(
            name=prompt_data["name"],
            content=prompt_data["content"],
            is_active=prompt_data["is_active"]
        )
        db.add(prompt)
    
    db.commit()
    print("‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã —Å–æ–∑–¥–∞–Ω—ã")

def seed_database():
    """Main function to seed the database with mock data"""
    print("üå± –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...")
    
    # Create database tables
    from ..models import models
    models.Base.metadata.create_all(bind=engine)
    
    db = SessionLocal()
    try:
        if check_database_empty(db):
            print("üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞. –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏...")
            
            create_sample_users(db)
            create_sample_jobs(db)
            create_sample_applications(db)
            create_sample_chat_sessions(db)
            create_system_prompts(db)
            
            print("üéâ –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
            print("\nüìã –°–æ–∑–¥–∞–Ω—ã —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:")
            print("   HR –ê–¥–º–∏–Ω: hr_admin / pass1234")
            print("   –ö–∞–Ω–¥–∏–¥–∞—Ç: candidate1 / pass1234") 
            print("   –¢–µ—Å—Ç. –ø–æ–ª—å–∑.: testuser / pass1234")
            print("\n‚úÖ –ß–∏—Å—Ç—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!")
        else:
            print("üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–ø—É—Å–∫ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è.")
    
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        db.rollback()
    finally:
        db.close() 